/**
 * The 6 Tab Slideshow
 * version 1.1
 * 
 * Author: Aaron Martins
 *
 * Requires jQuery 1.8.2+
 *
 * Full Instructions: http://aaronmartins.com/docs/6-tab-slideshow/
 *
 * @license
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 * http://www.apache.org/licenses/LICENSE-2.0
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/* Modernizr 2.7.1 (Custom Build) | MIT & BSD
 * Build: http://modernizr.com/download/#-csstransitions-cssclasses-testprop-testallprops-domprefixes-load
 */
window.Modernizr=function(e,t,n){function r(e){m.cssText=e}function i(e,t){return r(prefixes.join(e+";")+(t||""))}function s(e,t){return typeof e===t}function o(e,t){return!!~(""+e).indexOf(t)}function u(e,t){for(var r in e){var i=e[r];if(!o(i,"-")&&m[i]!==n)return t=="pfx"?i:!0}return!1}function a(e,t,r){for(var i in e){var o=t[e[i]];if(o!==n)return r===!1?e[i]:s(o,"function")?o.bind(r||t):o}return!1}function f(e,t,n){var r=e.charAt(0).toUpperCase()+e.slice(1),i=(e+" "+w.join(r+" ")+r).split(" ");return s(t,"string")||s(t,"undefined")?u(i,t):(i=(e+" "+E.join(r+" ")+r).split(" "),a(i,t,n))}var l="2.7.1",c={},h=!0,p=t.documentElement,d="modernizr",v=t.createElement(d),m=v.style,g,y={}.toString,b="Webkit Moz O ms",w=b.split(" "),E=b.toLowerCase().split(" "),S={},x={},T={},N=[],C=N.slice,k,L={}.hasOwnProperty,A;!s(L,"undefined")&&!s(L.call,"undefined")?A=function(e,t){return L.call(e,t)}:A=function(e,t){return t in e&&s(e.constructor.prototype[t],"undefined")},Function.prototype.bind||(Function.prototype.bind=function(e){var t=this;if(typeof t!="function")throw new TypeError;var n=C.call(arguments,1),r=function(){if(this instanceof r){var i=function(){};i.prototype=t.prototype;var s=new i,o=t.apply(s,n.concat(C.call(arguments)));return Object(o)===o?o:s}return t.apply(e,n.concat(C.call(arguments)))};return r}),S.csstransitions=function(){return f("transition")};for(var O in S)A(S,O)&&(k=O.toLowerCase(),c[k]=S[O](),N.push((c[k]?"":"no-")+k));return c.addTest=function(e,t){if(typeof e=="object")for(var r in e)A(e,r)&&c.addTest(r,e[r]);else{e=e.toLowerCase();if(c[e]!==n)return c;t=typeof t=="function"?t():t,typeof h!="undefined"&&h&&(p.className+=" "+(t?"":"no-")+e),c[e]=t}return c},r(""),v=g=null,c._version=l,c._domPrefixes=E,c._cssomPrefixes=w,c.testProp=function(e){return u([e])},c.testAllProps=f,p.className=p.className.replace(/(^|\s)no-js(\s|$)/,"$1$2")+(h?" js "+N.join(" "):""),c}(this,this.document),function(e,t,n){function r(e){return"[object Function]"==d.call(e)}function i(e){return"string"==typeof e}function s(){}function o(e){return!e||"loaded"==e||"complete"==e||"uninitialized"==e}function u(){var e=v.shift();m=1,e?e.t?h(function(){("c"==e.t?k.injectCss:k.injectJs)(e.s,0,e.a,e.x,e.e,1)},0):(e(),u()):m=0}function a(e,n,r,i,s,a,f){function l(t){if(!d&&o(c.readyState)&&(w.r=d=1,!m&&u(),c.onload=c.onreadystatechange=null,t)){"img"!=e&&h(function(){b.removeChild(c)},50);for(var r in T[n])T[n].hasOwnProperty(r)&&T[n][r].onload()}}var f=f||k.errorTimeout,c=t.createElement(e),d=0,g=0,w={t:r,s:n,e:s,a:a,x:f};1===T[n]&&(g=1,T[n]=[]),"object"==e?c.data=n:(c.src=n,c.type=e),c.width=c.height="0",c.onerror=c.onload=c.onreadystatechange=function(){l.call(this,g)},v.splice(i,0,w),"img"!=e&&(g||2===T[n]?(b.insertBefore(c,y?null:p),h(l,f)):T[n].push(c))}function f(e,t,n,r,s){return m=0,t=t||"j",i(e)?a("c"==t?E:w,e,t,this.i++,n,r,s):(v.splice(this.i++,0,e),1==v.length&&u()),this}function l(){var e=k;return e.loader={load:f,i:0},e}var c=t.documentElement,h=e.setTimeout,p=t.getElementsByTagName("script")[0],d={}.toString,v=[],m=0,g="MozAppearance"in c.style,y=g&&!!t.createRange().compareNode,b=y?c:p.parentNode,c=e.opera&&"[object Opera]"==d.call(e.opera),c=!!t.attachEvent&&!c,w=g?"object":c?"script":"img",E=c?"script":w,S=Array.isArray||function(e){return"[object Array]"==d.call(e)},x=[],T={},N={timeout:function(e,t){return t.length&&(e.timeout=t[0]),e}},C,k;k=function(e){function t(e){var e=e.split("!"),t=x.length,n=e.pop(),r=e.length,n={url:n,origUrl:n,prefixes:e},i,s,o;for(s=0;s<r;s++)o=e[s].split("="),(i=N[o.shift()])&&(n=i(n,o));for(s=0;s<t;s++)n=x[s](n);return n}function o(e,i,s,o,u){var a=t(e),f=a.autoCallback;a.url.split(".").pop().split("?").shift(),a.bypass||(i&&(i=r(i)?i:i[e]||i[o]||i[e.split("/").pop().split("?")[0]]),a.instead?a.instead(e,i,s,o,u):(T[a.url]?a.noexec=!0:T[a.url]=1,s.load(a.url,a.forceCSS||!a.forceJS&&"css"==a.url.split(".").pop().split("?").shift()?"c":n,a.noexec,a.attrs,a.timeout),(r(i)||r(f))&&s.load(function(){l(),i&&i(a.origUrl,u,o),f&&f(a.origUrl,u,o),T[a.url]=2})))}function u(e,t){function n(e,n){if(e){if(i(e))n||(f=function(){var e=[].slice.call(arguments);l.apply(this,e),c()}),o(e,f,t,0,u);else if(Object(e)===e)for(p in h=function(){var t=0,n;for(n in e)e.hasOwnProperty(n)&&t++;return t}(),e)e.hasOwnProperty(p)&&(!n&&!--h&&(r(f)?f=function(){var e=[].slice.call(arguments);l.apply(this,e),c()}:f[p]=function(e){return function(){var t=[].slice.call(arguments);e&&e.apply(this,t),c()}}(l[p])),o(e[p],f,t,p,u))}else!n&&c()}var u=!!e.test,a=e.load||e.both,f=e.callback||s,l=f,c=e.complete||s,h,p;n(u?e.yep:e.nope,!!a),a&&n(a)}var a,f,c=this.yepnope.loader;if(i(e))o(e,0,c,0);else if(S(e))for(a=0;a<e.length;a++)f=e[a],i(f)?o(f,0,c,0):S(f)?k(f):Object(f)===f&&u(f,c);else Object(e)===e&&u(e,c)},k.addPrefix=function(e,t){N[e]=t},k.addFilter=function(e){x.push(e)},k.errorTimeout=1e4,null==t.readyState&&t.addEventListener&&(t.readyState="loading",t.addEventListener("DOMContentLoaded",C=function(){t.removeEventListener("DOMContentLoaded",C,0),t.readyState="complete"},0)),e.yepnope=l(),e.yepnope.executeStack=u,e.yepnope.injectJs=function(e,n,r,i,a,f){var l=t.createElement("script"),c,d,i=i||k.errorTimeout;l.src=e;for(d in r)l.setAttribute(d,r[d]);n=f?u:n||s,l.onreadystatechange=l.onload=function(){!c&&o(l.readyState)&&(c=1,n(),l.onload=l.onreadystatechange=null)},h(function(){c||(c=1,n(1))},i),a?l.onload():p.parentNode.insertBefore(l,p)},e.yepnope.injectCss=function(e,n,r,i,o,a){var i=t.createElement("link"),f,n=a?u:n||s;i.href=e,i.rel="stylesheet",i.type="text/css";for(f in r)i.setAttribute(f,r[f]);o||(p.parentNode.insertBefore(i,p),h(n,0))}}(this,document),Modernizr.load=function(){yepnope.apply(window,[].slice.call(arguments,0))};(function(e,t,n){"use strict";function r(e){return typeof e==="undefined"}function i(e){return typeof e!=="undefined"}function s(e){return typeof e==="string"}function o(e){return typeof e==="number"}function u(e){return e!==null&&typeof e==="object"}function a(e){return Object.prototype.toString.call(e)==="[object Array]"}function f(e){return typeof e==="boolean"}function l(t){if(e.console&&e.console.log){console.log(t)}}function c(e,t,n,r,i){n?n=' id="'+n+'"':n="";r?r=' class="'+r+'"':r="";i?i=" "+i:i="";return"<"+t+n+r+i+">"+e+"</"+t+">"}function h(e,t){t?t=" "+t:t="";return'<img src="'+e+'"'+t+" />"}function p(e){e=e.replace("#","");this.$el=t("#"+e);if(this.$el.length==0){throw new Error("Please provide a valid DOM element for the slideshow to populate. Pass an html ID.")}}if(!e.jQuery||!e.Modernizr){throw new Error("Slideshow requires jQuery 1.8.2+ and Modernizr.csstransitions")}e.Slideshow=p;t.extend(t.easing,{easeOutQuart:function(e,t,n,r,i){return-r*((t=t/i-1)*t*t*t-1)+n}});t.support.transition=function(){var e=document.body||document.documentElement,t=e.style,r=t.transition!==n||t.WebkitTransition!==n||t.MozTransition!==n||t.MsTransition!==n||t.OTransition!==n;return r}();p.prototype.params={version:"1.1",fadedIn:false,fadespeed:200,indexcurrentlyopen:0,indexmovewidth:220,slidecount:6,slideheight:455,slideToStartOn:1};p.prototype.slides=[];p.prototype.begin=function(e){o(e)?this.params.slideToStartOn=e:"";var t=this.Ajax.processQueue(this,function(e,t,n){n.launch()});if(!t){this.launch()}};p.prototype.Ajax={queue:[],queueComplete:0,addToQueue:function(e,t){if(this.inQueue(t)){this.queue[this.getIndexBySlot(t)]={url:e,slot:t}}else{this.queue.push({url:e,slot:t})}},emptyQueue:function(){this.queue=[]},getUrlBySlot:function(e){var t=this.getIndexBySlot(e);if(t>-1&&t!=="undefined"){return this.queue[t].url}},getIndexBySlot:function(e){for(var t=0;t<this.queue.length;t++){if(this.queue[t].slot==e){return t}}},inQueue:function(e){var t=false;for(var n=0;n<this.queue.length;n++){if(this.queue[n].slot==e){t=true}}return t},processQueue:function(e,t){if(this.queue.length<1){return false}l("processing queue");var n=[];for(var r=0;r<this.queue.length;r++){this.getSlide(this.queue[r].url,this.queue[r].slot,t,e)}return true},getSlide:function(e,n,r,i){t.ajax({url:e,cache:true,type:"GET",beforeSend:function(e){},success:function(e,t){i.addSlide(e,n);if(++i.Ajax.queueComplete==i.Ajax.queue.length){r(e,t,i)}}}).fail(function(e){throw new Error("failed to load slide");throw new Error(e)})}};p.prototype.addSlide=function(e,t){if(!a(e)){e=[e]}if(!a(t)){t=[t]}for(var n=0;n<e.length;n++){if(s(e[n])&&o(t[n])){this.Ajax.addToQueue(e[n],t[n])}if(u(e[n])&&o(t[n])&&!a(e[n])){this.addSlideObject(e[n],t[n])}}};p.prototype.addSlideObject=function(e,t){this.slides[t]=e};p.prototype.getSlide=function(e){return this.slides[e]};p.prototype.validSlide=function(e){return u(e)&&s(e.alt)&&(s(e.indexup)&&s(e.indexover)||s(e.index_line_1)&&s(e.index_line_2))&&s(e.slider)&&s(e.stampup)&&s(e.stampover)&&s(e.product_link)&&o(e.stamp_top_css)};p.prototype.allSlidesValid=function(e){for(var t=1;t<=this.params.slidecount;t++){if(!this.validSlide(e[t])){return false}}return true};p.prototype.launch=function(){l("slides should be resolved, launching slideshow");if(this.allSlidesValid(this.slides)){this.$el.html(this.buildHtml());this.positionElements();this.attachHandlers();this.goToSlide(this.params.slideToStartOn);t("#sts-slideshow").fadeIn("fast");t(".sts-stamp").fadeIn("fast")}else{throw Error("Slideshow attempting to launch with invalid list of slides.")}};p.prototype.positionElements=function(){l("positionElements");t("#sts-slides").css("height",this.params.slideheight*this.params.slidecount+"px");for(var e=1;e<=this.params.slidecount;e++){t("#sts-slider-"+e).css("top",this.params.slideheight*e+"px")}};p.prototype.attachHandlers=function(){l("attaching handlers");var e=this;this.$track=t("#sts-slides");this.$index=[];this.$stamp=[];for(var n=1;n<=this.params.slidecount;n++){this.$index[n]={el:t("#sts-index-"+n),up:t("#sts-index-up-"+n),over:t("#sts-index-over-"+n)};this.$stamp[n]={el:t("#sts-stamp-"+n),up:t("#sts-stamp-up-"+n),over:t("#sts-stamp-over-"+n)};t("#sts-index-"+n).hover(function(){e.goToSlide(t(this).data("number"))});t("#sts-stamp-"+n).hover(function(){e.animateStamp(t(this),1)},function(){e.animateStamp(t(this),.001)})}};p.prototype.goToSlide=function(e){if(this.indexcurrentlyopen!=e){l("going to slide "+e);this.animateTrack(e);this.animateIndex(this.$index[e].over,"open")}this.indexcurrentlyopen=e};p.prototype.animateTrack=function(e){if(Modernizr.csstransitions){this.$track.css("top",-1*e*this.params.slideheight+"px")}else{this.$track.stop().animate({top:-1*e*this.params.slideheight},{duration:1e3,queue:false,easing:"easeOutQuart"})}};p.prototype.animateIndex=function(e,t){var n;t=="open"?n=0:n=-220;if(this.indexcurrentlyopen>0){var r=this.indexcurrentlyopen;this.indexcurrentlyopen=0;this.animateIndex(this.$index[r].over,"close")}if(Modernizr.csstransitions){e.css("left",n+"px")}else{e.stop().animate({left:n},{duration:500,queue:false,easing:"easeOutQuart"})}};p.prototype.animateStamp=function(e,t){if(Modernizr.csstransitions){e.children(".sts-stamp-over").css("opacity",t)}else{e.children(".sts-stamp-over").fadeTo("fast",t)}};p.prototype.buildIndices=function(e,t){var n="";if(e.indexup&&e.indexover){n+='<div id="sts-index-'+t+'" data-number="'+t+'" class="sts-index">';n+=c(h(e.indexup),"div","sts-index-up-"+t,"sts-index-up");n+='<a href="'+e.product_link+'">';n+=c(h(e.indexover),"div","sts-index-over-"+t,"sts-index-over");n+="</a>";n+="</div>"}else if(e.index_line_1&&e.index_line_2){n+='<div id="sts-index-'+t+'" data-number="'+t+'" class="sts-index">';n+=c('<div class="line-1">'+e.index_line_1+'</div><div class="line-2">'+e.index_line_2+"</div>","div","sts-index-up-"+t,"sts-index-up text");n+='<a href="'+e.product_link+'">';n+=c('<div class="line-1">'+e.index_line_1+'</div><div class="line-2">'+e.index_line_2+"</div>","div","sts-index-over-"+t,"sts-index-over text");n+="</a>";n+="</div>"}else{throw Error("Incorrect indices for slide "+t)}return n};p.prototype.buildHtml=function(){l("building html");l(this.slides);var e='<div id="sts-slideshow">';e+='<div id="sts-indices">';for(var t=1;t<=this.params.slidecount;t++){e+=this.buildIndices(this.slides[t],t)}e+="</div><!-- /#sts-indices -->";e+='<div id="sts-slides">';for(var t=1;t<=this.params.slidecount;t++){var n='<div id="sts-slider-'+t+'" class="sts-slider">';n+='<a href="'+this.slides[t].product_link+'">';n+=h(this.slides[t].slider);n+="</a>";n+='<div id="sts-stamp-'+t+'" class="sts-stamp" style="top:'+this.slides[t].stamp_top_css+'px">';n+='<div id="sts-stamp-up-'+t+'" class="sts-stamp-up">';n+=h(this.slides[t].stampup);n+="</div>";n+='<div id="sts-stamp-over-'+t+'"  class="sts-stamp-over">';n+='<a href="'+this.slides[t].product_link+'">';n+=h(this.slides[t].stampover);n+="</a>";n+="</div>";n+="</div><!-- /.sts-stamp -->";n+="</div><!-- /#sts-slider-"+t+" -->";e+=n}e+="</div><!-- /#sts-slides -->";e+="</div><!-- /#sts-slideshow -->";return e}})(window,jQuery)