/**
 * The 6 Tab Slideshow
 * version 1.0
 * 
 * Author: Aaron Martins
 *
 * Requires jQuery 1.8.2+
 *
 * Full Instructions: http://aaronmartins.com/docs/6-tab-slideshow/
 *
 * @license
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 * http://www.apache.org/licenses/LICENSE-2.0
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
(function(e,t,n){"use strict";function r(e){return typeof e==="undefined"}function i(e){return typeof e!=="undefined"}function s(e){return typeof e==="string"}function o(e){return typeof e==="number"}function u(e){return e!==null&&typeof e==="object"}function a(e){return Object.prototype.toString.call(e)==="[object Array]"}function f(e){return typeof e==="boolean"}function l(e){}function c(e,t,n,r,i){n?n=' id="'+n+'"':n="";r?r=' class="'+r+'"':r="";i?i=" "+i:i="";return"<"+t+n+r+i+">"+e+"</"+t+">"}function h(e,t){t?t=" "+t:t="";return'<img src="'+e+'"'+t+" />"}function p(e){e=e.replace("#","");this.$el=t("#"+e);if(this.$el.length==0){throw new Error("Please provide a valid DOM element for the slideshow to populate. Pass an html ID.")}}if(!e.jQuery){throw new Error("Slideshow requires jQuery 1.8.2+")}e.Slideshow=p;t.extend(t.easing,{easeOutQuart:function(e,t,n,r,i){return-r*((t=t/i-1)*t*t*t-1)+n}});t.support.transition=function(){var e=document.body||document.documentElement,t=e.style,r=t.transition!==n||t.WebkitTransition!==n||t.MozTransition!==n||t.MsTransition!==n||t.OTransition!==n;return r}();p.prototype.params={version:"1.0",fadedIn:false,fadespeed:200,indexcurrentlyopen:0,indexmovewidth:220,slidecount:6,slideheight:455,slideToStartOn:1};p.prototype.slides=[];p.prototype.begin=function(e){o(e)?this.params.slideToStartOn=e:"";var t=this.Ajax.processQueue(this,function(e,t,n){n.launch()});if(!t){this.launch()}};p.prototype.Ajax={queue:[],queueComplete:0,addToQueue:function(e,t){if(this.inQueue(t)){this.queue[this.getIndexBySlot(t)]={url:e,slot:t}}else{this.queue.push({url:e,slot:t})}},emptyQueue:function(){this.queue=[]},getUrlBySlot:function(e){var t=this.getIndexBySlot(e);if(t>-1&&t!=="undefined"){return this.queue[t].url}},getIndexBySlot:function(e){for(var t=0;t<this.queue.length;t++){if(this.queue[t].slot==e){return t}}},inQueue:function(e){var t=false;for(var n=0;n<this.queue.length;n++){if(this.queue[n].slot==e){t=true}}return t},processQueue:function(e,t){if(this.queue.length<1){return false}l("processing queue");var n=[];for(var r=0;r<this.queue.length;r++){this.getSlide(this.queue[r].url,this.queue[r].slot,t,e)}return true},getSlide:function(e,n,r,i){t.ajax({url:e,cache:true,type:"GET",beforeSend:function(e){},success:function(e,t){i.addSlide(e,n);if(++i.Ajax.queueComplete==i.Ajax.queue.length){r(e,t,i)}}}).fail(function(e){throw new Error("failed to load slide");throw new Error(e)})}};p.prototype.addSlide=function(e,t){if(!a(e)){e=[e]}if(!a(t)){t=[t]}for(var n=0;n<e.length;n++){if(s(e[n])&&o(t[n])){this.Ajax.addToQueue(e[n],t[n])}if(u(e[n])&&o(t[n])&&!a(e[n])){this.addSlideObject(e[n],t[n])}}};p.prototype.addSlideObject=function(e,t){this.slides[t]=e};p.prototype.getSlide=function(e){return this.slides[e]};p.prototype.validSlide=function(e){return u(e)&&s(e.alt)&&s(e.indexup)&&s(e.indexover)&&s(e.slider)&&s(e.stampup)&&s(e.stampover)&&s(e.product_link)&&o(e.stamp_top_css)};p.prototype.allSlidesValid=function(e){for(var t=1;t<=this.params.slidecount;t++){if(!this.validSlide(e[t])){return false}}return true};p.prototype.launch=function(){l("slides should be resolved, launching slideshow");if(this.allSlidesValid(this.slides)){this.$el.html(this.buildHtml());this.positionElements();this.attachHandlers();this.goToSlide(this.params.slideToStartOn);t("#sts-slideshow").fadeIn("fast");t(".sts-stamp").fadeIn("fast")}else{throw new Error("Slideshow attempting to launch with invalid list of slides: "+this.slides)}};p.prototype.positionElements=function(){l("positionElements");t("#sts-slides").css("height",this.params.slideheight*this.params.slidecount+"px");for(var e=1;e<=this.params.slidecount;e++){t("#sts-slider-"+e).css("top",this.params.slideheight*e+"px")}};p.prototype.attachHandlers=function(){l("attaching handlers");var e=this;this.$track=t("#sts-slides");this.$index=[];this.$stamp=[];for(var n=1;n<=this.params.slidecount;n++){this.$index[n]={el:t("#sts-index-"+n),up:t("#sts-index-up-"+n),over:t("#sts-index-over-"+n)};this.$stamp[n]={el:t("#sts-stamp-"+n),up:t("#sts-stamp-up-"+n),over:t("#sts-stamp-over-"+n)};t(".sts-index").hover(function(){e.goToSlide(t(this).data("number"))});this.$stamp[n].over.hover(function(){t(this).fadeTo("fast",1)},function(){t(this).fadeTo("fast",.001)})}};p.prototype.goToSlide=function(e){if(this.indexcurrentlyopen!=e){l("going to slide "+e);this.animateTrack(e);this.animateIndex(this.$index[e].over,"open")}this.indexcurrentlyopen=e};p.prototype.animateTrack=function(e){this.$track.stop().animate({top:-1*e*this.params.slideheight},{duration:1e3,queue:false,easing:"easeOutQuart"})};p.prototype.animateIndex=function(e,t){var n;t=="open"?n=0:n=-220;if(this.indexcurrentlyopen>0){var r=this.indexcurrentlyopen;this.indexcurrentlyopen=0;this.animateIndex(this.$index[r].over,"close")}e.stop().animate({left:n},{duration:500,queue:false,easing:"easeOutQuart"})};p.prototype.buildHtml=function(){l("building html");l(this.slides);var e='<div id="sts-slideshow">';e+='<div id="sts-indices">';for(var t=1;t<=this.params.slidecount;t++){e+='<div id="sts-index-'+t+'" data-number="'+t+'" class="sts-index">';e+=c(h(this.slides[t].indexup),"div","sts-index-up-"+t,"sts-index-up");e+='<a href="'+this.slides[t].product_link+'">';e+=c(h(this.slides[t].indexover),"div","sts-index-over-"+t,"sts-index-over");e+="</a>";e+="</div>"}e+="</div><!-- /#sts-indices -->";e+='<div id="sts-slides">';for(var t=1;t<=this.params.slidecount;t++){var n='<div id="sts-slider-'+t+'" class="sts-slider">';n+='<a href="'+this.slides[t].product_link+'">';n+=h(this.slides[t].slider);n+="</a>";n+='<div id="sts-stamp-'+t+'" class="sts-stamp" style="top:'+this.slides[t].stamp_top_css+'px">';n+='<div id="sts-stamp-up-'+t+'" class="sts-stamp-up">';n+=h(this.slides[t].stampup);n+="</div>";n+='<div id="sts-stamp-over-'+t+'"  class="sts-stamp-over">';n+='<a href="'+this.slides[t].product_link+'">';n+=h(this.slides[t].stampover);n+="</a>";n+="</div>";n+="</div><!-- /.sts-stamp -->";n+="</div><!-- /#sts-slider-"+t+" -->";e+=n}e+="</div><!-- /#sts-slides -->";e+="</div><!-- /#sts-slideshow -->";return e}})(window,jQuery)